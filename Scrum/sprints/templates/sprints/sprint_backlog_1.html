{% extends 'tasks/base.html' %}
{% block content %}
<!--FEATURES-->
<!--END BUTTON -> ENDS THE SPRINT, MAKE IT HIDE WITH JS(ONE TIME BUTTON), UPDATES STATUS TO DONE OR COMPLETE -->
<!--EDIT STATUS -> CAN EDIT STATUS OF THE TASKS, WILL UPDATE TO SQL. -->
<!--TIME-IN -> CAN INPUT A INPUT FIELD TO FILL IN TIME AND SAVE TO SQL. -->
<!--SAVE BUTTON -> PROMPT TO SAVE HTML AND UPDATES SQL -->
    <br>
    <br>
  <div class="page-header">
    <h1 class="page-header">Sprint Backlog</h1>
  </div>
    <br>
        <div class="card" style="width:100%; background-color: #DFDFDF;">
          <!-- if want to use img, use the below code -->
          <!-- <img src="..." class="card-img-top" alt="..."> -->
          <div class="card-body">
            <h4 class="card-title">{{sprints.title}}</h4>
            <div style="display: flex">
              <div style="flex:50%;">
                  <p class="card-text">Goal: {{ sprints.sprint_goal }}</p>
              </div>
              <div style="flex:50%;">
                <p class="card-text">Start Date: {{ sprints.start_date }}</p>
              </div>
            </div>
            <br>

            <div style="display: flex">
              <div style="flex:50%;">
                <p class="card-text">Status: {{ sprints.get_status_display }}</p>
              </div>
              <div style="flex:50%;">
                <p class="card-text">End Date: {{sprints.end_date}}</p>
              </div>
            </div>
            <br>

            <div style="display: flex">
              <div style="flex:50%;">
                <p class="card-text">Days left: {{sprints.days_left}}</p>
              </div>
            </div>
          </div>
        </div>

            <a href="{%url 'sprint-list'%}" class="btn btn-secondary" style="width:7%;" data-inline="true">Back</a>
        {% if sprints.status == "PE"%}
            <a href="{%url 'sprint-update' sprints.pk %}" class="btn btn-secondary" style="width:7%;" data-inline="true">Edit</a>
            <a href="{%url 'start-end' sprints.id%}" class="btn btn-success" style="width:15%;" data-inline="true">Start Sprint</a>
        {% elif sprints.status == "ON" %}
            <a href="{%url 'start-end' sprints.id%}" class="btn btn-danger" style="width:15%;" data-inline="true">End Sprint</a>
        {% endif %}
<div>
    <br>
    {% if sprints.status == "EN" %}
        <h3><b>All Overdued Tasks</b></h3>
    {% else %}
        <h3><b>Tasks</b></h3>
    {% endif %}

    <table class= "table table-hover table-striped">
        <thead class="table_head">
            <tr>
                <th class="col1">Title</th>
                <th class="col2">Priority</th>
                <th class="col3">Status</th>
                <th class="col4">Tag</th>
                <th class="col5">Assignee</th>
             </tr>
        </thead>
        <tbody>
            {% for x in task %}
                {% if x.sprint == sprints and sprints.status == "ON" %}
                    <tr>
                      <td>{{x.title}}</td>
                      <td>{{ x.get_priority_display }}</td>
                      <td>{{ x.get_status_display }}</td>
                      <td>{{ x.tag }}</td>
                      <td>{{ x.assignee }}</td>
                      <td><a href="{% url 'task-status-update' x.pk %}"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a></td>
                    </tr>
                {% elif sprints.status == "EN" and x.status == "OV"%}
                    <tr>
                      <td>{{ x.title }}</td>
                      <td>{{ x.get_priority_display }}</td>
                      <td>{{ x.get_status_display }}</td>
                      <td>{{ x.tag }}</td>
                      <td>{{ x.assignee }}</td>
                    </tr>
                {% elif sprints.status == "PE" and x.sprint == sprints %}
                    <tr>
                      <td>{{ x.title }}</td>
                      <td>{{ x.get_priority_display }}</td>
                      <td>{{ x.get_status_display }}</td>
                      <td>{{ x.tag }}</td>
                      <td>{{x.assignee }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
