{% extends 'tasks/base.html' %}
{% block content %}
    <style>
        body {font-family: Arial;}

        /* Style the tab */
        .tab {
          overflow: hidden;

        }

        /* Style the buttons inside the tab */
        .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
          font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
          background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
          background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
          display: none;
          padding: 6px 12px;
          -webkit-animation: fadeEffect 1s;
          animation: fadeEffect 1s;
        }

        /* Fade in tabs */
        @-webkit-keyframes fadeEffect {
          from {opacity: 0;}
          to {opacity: 1;}
        }

        @keyframes fadeEffect {
          from {opacity: 0;}
          to {opacity: 1;}
        }
    </style>
    <br>
    <h1>Dashboard</h1>
    <br>
    <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'All')" id="defaultOpen">All</button>
        <button class="tablinks" onclick="openCity(event, 'Completed')">Completed</button>
        <button class="tablinks" onclick="openCity(event, 'Pending')">Pending</button>
        <button class="tablinks" onclick="openCity(event, 'In_Progress')">In Progress</button>
    </div>
    <br>

    <div id="All" class="tabcontent" style="display: flex;">
        <table class="table table-borderless">
                  <tbody>
                  {% for x in sprint_ongoing %}
                    {% for y in x.tasks.all %}
                    <tr>
                      <td>{{y.title}}</td>
                      <td>{{y.get_status_display}}</td>
                      <td >None</td>
                      <td >{{y.assignee}}</td>
                      <td>{{y.due_date}}</td>
                    </tr>
                    {%endfor%}
                  {%endfor%}
                  </tbody>
                </table>
    </div>

    <div id="Completed" class="tabcontent" style="display: flex;">
                <table class="table table-borderless">
                  <tbody>
                  {% for x in sprint_ongoing %}
                    {% for y in x.tasks.all %}
                        {% if y.status == TASK_COMPLETE %}
                    <tr>
                      <td>{{y.title}}</td>
                      <td>{{y.get_status_display}}</td>
                      <td >None</td>
                      <td >{{y.assignee}}</td>
                      <td>{{y.due_date}}</td>
                    </tr>
                        {%endif%}
                    {%endfor%}
                  {%endfor%}
                  </tbody>
                </table>
    </div>

    <div id="Pending" class="tabcontent" style="display: flex;">
        <table class="table table-borderless">
                  <tbody>
                  {% for x in sprint_ongoing %}
                    {% for y in x.tasks.all %}
                        {% if y.status == TASK_PENDING %}
                    <tr>
                      <td>{{y.title}}</td>
                      <td>{{y.get_status_display}}</td>
                      <td >None</td>
                      <td >{{y.assignee}}</td>
                      <td>{{y.due_date}}</td>
                    </tr>
                        {%endif%}
                    {%endfor%}
                  {%endfor%}
                  </tbody>
                </table>
    </div>

    <div id="In_Progress" class="tabcontent" style="display: flex;">
        <table class="table table-borderless">
          <tbody>
          {% for x in sprint_ongoing %}
            {% for y in x.tasks.all %}
                {% if y.status == TASK_IN_PROGRESS %}
            <tr>
              <td>{{y.title}}</td>
              <td>{{y.get_status_display}}</td>
              <td >None</td>
              <td >{{y.assignee}}</td>
              <td>{{y.due_date}}</td>
            </tr>
                {%endif%}
            {%endfor%}
          {%endfor%}
          </tbody>
        </table>
    </div>

        <!-- Upcoming events -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Upcoming events <span>| pending </span></h5>
            <div class="activity">
            {% for x in sprint_pending %}
              <ul>
                <li>{{x.title}} - {{x.get_status_display}}</li>
              </ul>
            {%endfor%}
            </div>

          </div>
        </div><!-- Upcoming events -->


    <script>
        function openCity(evt, cityName) {
          var i, tabcontent;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(cityName).style.display = "block";
          evt.currentTarget.className += " active";
          }

    document.getElementById("defaultOpen").click();
    </script>
{% endblock %}


 